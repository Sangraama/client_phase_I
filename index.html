<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Sangraama:සංග්‍රාම</title>
<!-- Page metadata -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="Game Client">
<meta name="author" content="">

<!-- Add style sheets and responsive design -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="css/bootstrap-responsive.min.css" rel="stylesheet">
<!-- Add java script libraries -->
<script type="text/javascript" src="js/lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/lib/bootstrap.min.js"></script>
<script type="text/javascript" src="js/lib/underscore.js"></script>
<script type="text/javascript" src="js/lib/jquery.json-2.4.min.js"></script>
<script type="text/javascript" src="js/lib/jquery.websocket-0.0.4.js"></script>
<script type="text/javascript" src="js/lib/box2d.js"></script>
<!-- Add Sangraama customize java scripts -->
<script type="text/javascript" src="js/utils.js"></script>
<script type="text/javascript" src="js/graphic.js"></script>
<script type="text/javascript" src="js/aoihandler.js"></script>
<script type="text/javascript" src="js/wshandler.js"></script>
</head>

<body id="body">

    <div class="row-fluid">
      <div id="sangraama_container" class="span12"></div>
      <!--       <canvas id="sangraama_canvas" width="1000" height="500" -->
      <!--         style="background: #819FF7"> This text is displayed -->
      <!--       because of your browser does not support HTML5 Canvas. Please try -->
      <!--       with a latest web browser. </canvas> -->
    </div>
    <div class="row-fluid">
      <div class="span4  offset1">
        <div class="control-group">
          <button id="start" class="btn btn-warning" type="button">Start
            Game</button>
          <button id="stop" class="btn btn-danger" type="button">Stop
            Game</button>
        </div>
      </div>
    </div>

  <script type="text/javascript">
  $('#start').click(function() {
    player.userID = Math.floor(Math.random() * 1000) + 1;
    console.log('player id:' + player.id);
    var hostLocation = 'localhost:8080';
    var URL = hostLocation + '/sangraama-server/sangraama/player';
    // start wsList with 0 index
    wsList[0] = new WebSocketHandler(URL, 0);
    wsList[0].connect();
  });

  $('#stop').click(function() {
    // Close all opened websockets
    for ( var i = 0; i < 10; i++) {
      if (wsList[i] != null || wsList[i] != undefined) {
        if (primaryCon == i) {
          primaryCon--;
        }
        console.log('Stopped the connection ' + wsList[i].getHostAddress());
        wsList[i].close(i);// try closing connection
      }
    }
    primaryCon = 0;
  });
  </script>

</body>
</html>
